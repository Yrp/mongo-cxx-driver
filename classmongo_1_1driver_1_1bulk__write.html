<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>MongoDB C++11 Driver: mongo::driver::bulk_write Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MongoDB C++11 Driver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>mongo</b></li><li class="navelem"><b>driver</b></li><li class="navelem"><a class="el" href="classmongo_1_1driver_1_1bulk__write.html">bulk_write</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmongo_1_1driver_1_1bulk__write-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongo::driver::bulk_write Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class representing a batch of write operations that can be sent to the server as a group.  
 <a href="classmongo_1_1driver_1_1bulk__write.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="bulk__write_8hpp_source.html">bulk_write.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1driver_1_1bulk__write_1_1impl.html">impl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6f515c3832452585194282de45f42ab0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1driver_1_1bulk__write.html#a6f515c3832452585194282de45f42ab0">bulk_write</a> (bool ordered)</td></tr>
<tr class="memdesc:a6f515c3832452585194282de45f42ab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new bulk operation to be executed against a <a class="el" href="classmongo_1_1driver_1_1collection.html" title="Class representing server side document groupings within a MongoDB database. ">mongo::driver::collection</a>.  <a href="#a6f515c3832452585194282de45f42ab0">More...</a><br /></td></tr>
<tr class="separator:a6f515c3832452585194282de45f42ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e296e062fa78db02c6c328ee50f38cd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2e296e062fa78db02c6c328ee50f38cd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1driver_1_1bulk__write.html#a2e296e062fa78db02c6c328ee50f38cd">bulk_write</a> (<a class="el" href="classmongo_1_1driver_1_1bulk__write.html">bulk_write</a> &amp;&amp;) noexcept</td></tr>
<tr class="memdesc:a2e296e062fa78db02c6c328ee50f38cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructs a bulk write operation. <br /></td></tr>
<tr class="separator:a2e296e062fa78db02c6c328ee50f38cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac961ede8f1f4de0bed16e8d18f1e38a9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac961ede8f1f4de0bed16e8d18f1e38a9"></a>
<a class="el" href="classmongo_1_1driver_1_1bulk__write.html">bulk_write</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1driver_1_1bulk__write.html#ac961ede8f1f4de0bed16e8d18f1e38a9">operator=</a> (<a class="el" href="classmongo_1_1driver_1_1bulk__write.html">bulk_write</a> &amp;&amp;) noexcept</td></tr>
<tr class="memdesc:ac961ede8f1f4de0bed16e8d18f1e38a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assigns a bulk write operation. <br /></td></tr>
<tr class="separator:ac961ede8f1f4de0bed16e8d18f1e38a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0c5ac7f68214fe5baa58b0f0808ea66"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab0c5ac7f68214fe5baa58b0f0808ea66"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1driver_1_1bulk__write.html#ab0c5ac7f68214fe5baa58b0f0808ea66">~bulk_write</a> ()</td></tr>
<tr class="memdesc:ab0c5ac7f68214fe5baa58b0f0808ea66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys a bulk write operation. <br /></td></tr>
<tr class="separator:ab0c5ac7f68214fe5baa58b0f0808ea66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545293c852befcf817d8b161ac3bdeca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1driver_1_1bulk__write.html#a545293c852befcf817d8b161ac3bdeca">append</a> (const <a class="el" href="classmongo_1_1driver_1_1model_1_1write.html">model::write</a> &amp;operation)</td></tr>
<tr class="memdesc:a545293c852befcf817d8b161ac3bdeca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends a single write to the bulk write operation.  <a href="#a545293c852befcf817d8b161ac3bdeca">More...</a><br /></td></tr>
<tr class="separator:a545293c852befcf817d8b161ac3bdeca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37941a2669f8feb351b12184dacb488d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1driver_1_1bulk__write.html#a37941a2669f8feb351b12184dacb488d">write_concern</a> (class <a class="el" href="classmongo_1_1driver_1_1write__concern.html">write_concern</a> wc)</td></tr>
<tr class="memdesc:a37941a2669f8feb351b12184dacb488d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the <a class="el" href="classmongo_1_1driver_1_1write__concern.html" title="Class representing the server-side requirement for reporting the success of a write operation...">write_concern</a> for this operation.  <a href="#a37941a2669f8feb351b12184dacb488d">More...</a><br /></td></tr>
<tr class="separator:a37941a2669f8feb351b12184dacb488d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class representing a batch of write operations that can be sent to the server as a group. </p>
<p>If you have a lot of write operations to execute, it can be more efficient to send them as part of a <a class="el" href="classmongo_1_1driver_1_1bulk__write.html" title="Class representing a batch of write operations that can be sent to the server as a group...">bulk_write</a> in order to avoid unnecessary network-level round trips between the driver and the server.</p>
<p>Bulk writes affect a single collection only and are executed via the <a class="el" href="classmongo_1_1driver_1_1collection.html#aca6c1f7773a180b93e4da05244a1b784" title="Sends a container of writes to the server as a bulk write operation. ">collection::bulk_write()</a> method. Options that you would typically specify for individual write operations (such as write concern) are instead specified for the aggregate operation.</p>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;mongo/bson/builder.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;mongo/driver/client.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;mongo/driver/collection.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;mongo/driver/bulk_write.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;mongo/driver/model/insert_one.hpp&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacemongo_1_1bson.html">mongo::bson</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="comment">// Connect and get a collection</span></div>
<div class="line">    client mongo_client;</div>
<div class="line">    <span class="keyword">auto</span> coll = mongo_client[<span class="stringliteral">&quot;database&quot;</span>][<span class="stringliteral">&quot;collection&quot;</span>];</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Build document to insert (&#39;_id&#39; field will be generated as none was provided)</span></div>
<div class="line">    document::builder doc;</div>
<div class="line">    doc &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Construct the write operations (can mix inserts / updates / deletes, etc...)</span></div>
<div class="line">    model::insert_one insert_one(doc);</div>
<div class="line">    model::insert_one insert_two(doc);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create the bulk_write operation (to be executed in order because we pass &#39;true&#39;)</span></div>
<div class="line">    <a class="code" href="classmongo_1_1driver_1_1bulk__write.html#a6f515c3832452585194282de45f42ab0">bulk_write</a> writes(<span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Append the write operations we constructed above</span></div>
<div class="line">    writes.append(insert_one);</div>
<div class="line">    writes.append(insert_two);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Execute the bulk operation</span></div>
<div class="line">    <span class="keyword">auto</span> result = collection.bulk_write(writes);</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Uncomment and implement when c-driver provides this functionality class <a class="el" href="classmongo_1_1driver_1_1write__concern.html" title="Class representing the server-side requirement for reporting the success of a write operation...">write_concern</a> write_concern() const;</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://docs.mongodb.org/manual/core/write-operations/">http://docs.mongodb.org/manual/core/write-operations/</a> </dd>
<dd>
<a href="http://docs.mongodb.org/manual/core/bulk-write-operations/">http://docs.mongodb.org/manual/core/bulk-write-operations/</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6f515c3832452585194282de45f42ab0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mongo::driver::bulk_write::bulk_write </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ordered</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes a new bulk operation to be executed against a <a class="el" href="classmongo_1_1driver_1_1collection.html" title="Class representing server side document groupings within a MongoDB database. ">mongo::driver::collection</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ordered</td><td>If <code>true</code> all write operations will be executed serially in the order they were appended and the entire bulk operation will abort on the first error. If <code>false</code> operations will be executed in an arbitrary order (possibly in parallel on the server) and any errors will be reported after attempting all operations. Unordered bulk writes may be more efficient than ordered bulk writes. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a545293c852befcf817d8b161ac3bdeca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongo::driver::bulk_write::append </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1driver_1_1model_1_1write.html">model::write</a> &amp;&#160;</td>
          <td class="paramname"><em>operation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Appends a single write to the bulk write operation. </p>
<p>The write operation's contents are copied into the bulk operation completely, so there is no dependency between the life of an appended write operation and the bulk operation itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">operation</td><td>The write operation to append (an instance of <a class="el" href="classmongo_1_1driver_1_1model_1_1write.html">model::write</a>)</td></tr>
  </table>
  </dd>
</dl>
<p>A <a class="el" href="classmongo_1_1driver_1_1model_1_1write.html">model::write</a> can be implicitly constructed from any of the following MongoDB models:</p>
<ul>
<li><a class="el" href="classmongo_1_1driver_1_1model_1_1insert__one.html" title="Class representing a MongoDB insert operation that creates a single document. ">model::insert_one</a></li>
<li><a class="el" href="classmongo_1_1driver_1_1model_1_1delete__one.html" title="Class representing a MongoDB delete operation that removes a single document. ">model::delete_one</a></li>
<li><a class="el" href="classmongo_1_1driver_1_1model_1_1replace__one.html" title="Class representing a MongoDB update operation that replaces a single document. ">model::replace_one</a></li>
<li><a class="el" href="classmongo_1_1driver_1_1model_1_1update__many.html" title="Class representing a MongoDB update operation that modifies multiple documents. ">model::update_many</a></li>
<li><a class="el" href="classmongo_1_1driver_1_1model_1_1update__one.html" title="Class representing a MongoDB update operation that modifies a single document. ">model::update_one</a> </li>
</ul>

</div>
</div>
<a class="anchor" id="a37941a2669f8feb351b12184dacb488d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongo::driver::bulk_write::write_concern </td>
          <td>(</td>
          <td class="paramtype">class <a class="el" href="classmongo_1_1driver_1_1write__concern.html">write_concern</a>&#160;</td>
          <td class="paramname"><em>wc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the <a class="el" href="classmongo_1_1driver_1_1write__concern.html" title="Class representing the server-side requirement for reporting the success of a write operation...">write_concern</a> for this operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wc</td><td>The <a class="el" href="classmongo_1_1driver_1_1write__concern.html" title="Class representing the server-side requirement for reporting the success of a write operation...">write_concern</a> to set </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/mongo/driver/<a class="el" href="bulk__write_8hpp_source.html">bulk_write.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Feb 5 2015 11:49:04 for MongoDB C++11 Driver by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
